# aws_agents

## About
This code was generated by [CodeCraftAI](https://codecraft.name)

**User requests:**
I need the necessary python files and AWS terraform script for the following:

-One agent as end-point to initiate step-function workflow
-Two agents in an agentic AI workflow using AWS Lambda as the logic container 
-Agents will call LLM api (openAI, gemini, or otherwise)
-Agents will be orchestrated by a step-function 

-I just want a hello-world pattern for now. One lambda to execute the step function as a result of an API call to HTTPS endpoint. Two lambdas with placeholders for API integrations with LLMs, and a step function that orchestrates their workflow. It could be as simple as when the end-point lambda is called, it iniitates the step function which sends "hello" to agent 1, agent 1 responds with "world" and then the step function combines hello and world and sends to the 2nd agent who responds back with "how are you" and then the response back to the step function and response back to the end-point lambda should be "Hello world, how are you"



Check OUTPUT.md for the complete unaltered output.

## Project Plan
```
Here’s a **simple and clear project plan** based on the clarified requirements. The plan includes **main tasks**, **technical considerations**, and an **estimated timeline**.

---

## **Project Plan**

### **1. Setup and Initialization**
#### **Tasks**:
1. **Set up AWS Account and IAM Roles**:  
   - Create necessary IAM roles and permissions for Lambda, Step Functions, and API Gateway.

#### **Technical Considerations**:
- Use Terraform to define and manage IAM roles and policies.

#### **Estimated Time**: 1 hour

---

### **2. Develop Python Lambda Functions**
#### **Tasks**:
1. **Endpoint Lambda**:  
   - Develop `endpoint_lambda.py` to trigger the Step Function when called via API Gateway.

2. **Agent 1 Lambda**:  
   - Develop `agent1_lambda.py` to respond with "world" when given "hello".

3. **Agent 2 Lambda**:  
   - Develop `agent2_lambda.py` to respond with "how are you" when given "Hello world".

#### **Technical Considerations**:
- Use AWS SDK (Boto3) for Step Function interactions in the endpoint Lambda.
- Add placeholder comments for LLM API calls in agent Lambda functions.

#### **Estimated Time**: 2 hours

---

### **3. Define Step Function Workflow**
#### **Tasks**:
1. **Create Step Function Definition**:  
   - Define the Step Function workflow using AWS Step Function JSON syntax.  
   - Steps:  
     - Trigger Agent 1 Lambda with "hello".  
     - Pass Agent 1’s response ("world") to Agent 2 Lambda with "Hello world".  
     - Combine the responses to form "Hello world, how are you".  
     - Return the final response to the API Gateway.

#### **Technical Considerations**:
- Ensure proper error handling and state transitions in the Step Function.

#### **Estimated Time**: 2 hours

---

### **4. Deploy Infrastructure with Terraform**
#### **Tasks**:
1. **Write Terraform Script**:  
   - Define resources for API Gateway, Lambda functions, Step Function, and IAM roles.

2. **Deploy Infrastructure**:  
   - Use `terraform apply` to deploy the AWS infrastructure.

#### **Technical Considerations**:
- Use Terraform modules for reusable components (e.g., IAM roles, Lambda functions).
- Test deployments in a development environment before production.

#### **Estimated Time**: 3 hours

---

### **5. Testing and Validation**
#### **Tasks**:
1. **Test API Gateway Endpoint**:  
   - Send an HTTP request to the API Gateway and validate the response.

2. **Validate Step Function Workflow**:  
   - Check that the Step Function orchestrates the agent Lambdas correctly.

3. **Check Error Handlers**:  
   - Test error scenarios (e.g., Lambda failures, Step Function timeouts).

#### **Technical Considerations**:
- Use AWS CloudWatch for logging and debugging.

#### **Estimated Time**: 2 hours

---

### **6. Documentation and Handover**
#### **Tasks**:
1. **Document the Workflow**:  
   - Write a README with steps to deploy and test the project.

2. **Document Code**:  
   - Add comments and explanations for the Python and Terraform code.

3. **Handover**:  
   - Provide instructions for future enhancements (e.g., integrating LLM APIs).

#### **Estimated Time**: 1 hour

---

## **Estimated Timeline**
| Task                                | Estimated Time |
|-------------------------------------|----------------|
| Setup and Initialization            | 1 hour         |
| Develop Python Lambda Functions     | 2 hours        |
| Define Step Function Workflow       | 2 hours        |
| Deploy Infrastructure with Terraform| 3 hours        |
| Testing and Validation              | 2 hours        |
| Documentation and Handover          | 1 hour         |
| **Total**                           | **11 hours**   |

---

## **Tools and Technologies**
- **AWS Services**: Step Function, Lambda, API Gateway, IAM, CloudWatch.  
- **Programming Languages**: Python (Boto3).  
- **Infrastructure as Code**: Terraform.  
- **Testing Tools**: Postman, AWS CLI, CloudWatch.  

---

## **Deliverables**
1. **Python Lambda Files**:  
   - `endpoint_lambda.py`, `agent1_lambda.py`, `agent2_lambda.py`.

2. **Terraform Script**:  
   - Scripts to deploy API Gateway, Lambda functions, Step Function, and IAM roles.

3. **Step Function Definition**:  
   - JSON file defining the Step Function workflow.

4. **Documentation**:  
   - README with deployment and testing instructions.

---

Let me know if this plan meets your expectations or if you’d like to adjust any aspects!
```
